# Пошук

<!-- toc -->

Екран перегляду Anki та функція Відфільтрованих колод використовують спільний метод
пошуку конкретних карток/нотаток.

## Прості пошуки

Коли вводите текст у поле пошуку, Anki знаходить відповідні нотатки
і відображає їхні картки. Anki шукає у всіх полях нотаток, але
не шукає за тегами (див. далі в цьому розділі, як шукати за тегами). Деякі приклади:

`dog`\
пошук за "dog" - також знайде слова на кшталт "doggy" і "underdog".

`dog cat`\
знаходить нотатки, що містять і "dog", і "cat", наприклад, "raining
cats and dogs".

`dog or cat`\
знаходить нотатки з "dog" або "cat".

`dog (cat or mouse)`\
знаходить нотатки з "dog" і "cat", або "dog" і "mouse".

`-cat`\
знаходить нотатки без слова "cat".

`-cat -mouse`\
знаходить нотатки без "cat" і "mouse".

`-(cat or mouse)`\
те саме, що й вище.

`"a dog"`\
знаходить нотатки з точною послідовністю символів "a dog", наприклад,
"atta dog", але не "dog a" або "adog".

`-"a dog"`\
знаходить нотатки без точної фрази "a dog"

`d_g`\
знаходить нотатки з d, &lt;літера&gt;, g, як-от dog, dig, dug тощо.

`d*g`\
знаходить нотатки з d, &lt;нуль або більше літер&gt;, g, як-от dg, dog, dung,
тощо.

`w:dog`\
пошук за "dog" на межі слова - знайде "dog", але не "doggy"
або "underdog". Потрібна Anki 2.1.24+ або AnkiMobile 2.1.61+. Зверніть увагу, що
зміни форматування можуть інтерпретуватися як межі слова, наприклад, пошук
за `w:exam` знайде **exam**ple.

`w:dog*`\
знайде "dog" і "doggy", але не "underdog".

`w:*dog`\
знайде "dog" і "underdog", але не "doggy".

Деякі моменти з наведеного вище:

- Пошукові терміни розділяються пробілами.

- Коли надано кілька пошукових термінів, Anki шукає нотатки, що
  відповідають усім термінам - між кожним терміном вставляється неявне 'і'. У Anki 2.1.24+ і AnkiMobile 2.0.60+ можна бути явним,
  якщо хочете ("dog and cat" те саме, що й "dog cat"), але старіші
  версії Anki трактуватимуть "and" як ще одне слово для пошуку.

- Можна використовувати "or", якщо потрібно, щоб збігся лише один із термінів.

- Можна додати мінус перед терміном, щоб знайти нотатки, які не
  відповідають йому.

- Можна групувати пошукові терміни, поміщаючи їх у дужки, як у прикладі
  **dog (cat or mouse)**. Це стає важливим при
  комбінуванні пошуків OR і AND — у прикладі з
  дужками збігається або 'dog cat', або 'dog mouse', тоді як
  без них збігатиметься або 'dog і cat', або 'mouse'.

- Anki може шукати лише у форматуванні в [полі сортування](editing.md#налаштування-полів), яке ви налаштували. Наприклад, якщо додати
  "**exa**mple" до одного з полів, це не буде знайдено при
  пошуку за "example", якщо це поле не є полем сортування. Якщо слово
  не відформатоване або форматування не змінюється посередині
  слова, тоді Anki зможе знайти його в будь-якому полі.

- Стандартні пошуки нечутливі до регістру для латинських символів - a-z буде
  відповідати A-Z і навпаки. Інші символи, як-от кирилиця, чутливі до регістру
  у стандартному пошуку, але можуть стати нечутливими до регістру при пошуку на межі слова
  або регулярному виразі (`w:`, `re:`).

## Обмеження до поля

Можна також попросити Anki шукати лише в тому випадку, якщо певне поле містить
текст. На відміну від наведених вище пошуків, пошук за полями вимагає 'точного
збігу' за замовчуванням.

`front:dog`\
знайти нотатки з полем Front, яке точно містить "dog". Поле, що містить "a
dog", не буде збігатися.

`"animal front:a dog"`\
знайти нотатки, де поле "Animal Front" точно містить "a dog". Подвійні лапки є
обов'язковими, див. [нижче](#пошук-спеціальних-символів).

`front:*dog*`\
знайти нотатки з полем Front, що містить dog десь у тексті

`front:`\
знайти нотатки з порожнім полем Front

`front:_*`\
знайти нотатки з непорожнім полем Front

`front:*`\
знайти нотатки з полем Front, порожнім або ні

`fr*:text`\
знайти нотатки в полі, що починається з "fr". Потрібна Anki 2.1.24+ або AnkiMobile 2.1.60+.

## Теги, колоди, картки та нотатки

`tag:animal`\
знайти нотатки з тегом "animal" або підтегами, як-от "animal::mammal"

`tag:none`\
знайти нотатки без тегів

`tag:ani*`\
знайти нотатки з тегами, що починаються на ani

`deck:french`\
знайти картки в колоді French або підколодах, як-от French::Vocab

`deck:french -deck:french::*`\
знайти картки в French, але не в підколодах

`deck:"french vocab"`\
пошук, коли в назві колоди є пробіл

`"deck:french vocab"`\
також підходить

`deck:filtered`\
лише відфільтровані колоди

`-deck:filtered`\
лише звичайні колоди

`preset:"Default"`\
картки у всіх колодах, що використовують усталені параметри колоди 'Default'.
Потрібна Anki 23.10+.

`card:forward`\
пошук карток Forward

`card:1`\
пошук карток за номером шаблону - наприклад, щоб знайти другу cloze
делецію для нотатки, використовуйте `card:2`

`note:basic`\
пошук карток із типом нотатки Basic

## Ігнорування акцентів/комбінованих символів

Потрібна Anki 2.1.24+ або AnkiMobile 2.0.60+.

Можна використовувати `nc:` для видалення комбінованих символів ("no combining"). Наприклад:

`nc:uber`\
збігається з нотатками, що містять "uber", "über", "Über" тощо.

`nc:は`\
збігається з "は", "ば" і "ぱ"

Пошуки, що ігнорують комбіновані символи, повільніші за звичайні пошуки.

## Регулярні вирази

Anki 2.1.24+, AnkiMobile 2.0.60+ і AnkiDroid 2.17+ підтримують пошук у нотатках за допомогою "регулярних виразів",
стандартного та потужного способу пошуку в тексті.

Почніть пошук із `re:`, щоб шукати за регулярним виразом. Щоб полегшити роботу, Anki
трактуватиме наступне як [сирий ввід](#сирий-ввід), тому враховуйте правила, наведені там.

Деякі приклади:

`"re:(some|another).*thing"`\
знайти нотатки, що містять "some" або "another", за якими йде 0 або більше символів, а потім "thing"

`re:\d{3}`\
знайти нотатки, що містять 3 цифри поспіль

Регулярні вирази також можна обмежити до певного поля. Зверніть увагу, що на відміну від звичайних пошуків
у певному полі, регулярні вирази в полях не вимагають точного збігу. Наприклад:

`front:re:[a-c]1`\
збігається з великими або малими a1, B1 або c1, що зустрічаються будь-де в полі "Front"

`front:re:^[a-c]1$`\
як і вище, але не збігається, якщо перед або після a1/b1/c1 є інший текст.

Anki 2.1.50 додала підтримку regex для тегів:

`tag:re:^parent$`\
знайти нотатки з точним тегом "parent", ігноруючи дочірні теги, як-от "parent::child"

`"tag:re:lesson-(1[7-9]|2[0-5])"`\
знайти нотатки з тегами "lesson-17" до "lesson-25"

Дізнатися більше про регулярні вирази можна тут: <https://regexone.com/lesson/introduction_abcs>

Деякі моменти, на які варто звернути увагу:

- Пошук за замовчуванням нечутливий до регістру; використовуйте `(?-i)` на початку, щоб увімкнути чутливість до регістру.
- Деякий текст, як-от пробіли та нові рядки, може бути представлений по-іншому в HTML - можна
  використовувати HTML-редактор на екрані редагування, щоб побачити основний HTML-вміст.
- Для специфіки підтримки regex у Anki, див. документацію regex crate: <https://docs.rs/regex/1.3.9/regex/#syntax>

## Стан картки

`is:due`\
картки для повторення та навчання, що очікують на вивчення

`is:new`\
нові картки

`is:learn`\
картки в процесі навчання

`is:review`\
картки для повторення (як ті, що очікують, так і ті, що не очікують) і картки, що були забуті

`is:suspended`\
картки, що були призупинені вручну

`is:buried`\
картки, що були приховані, або [автоматично](studying.md#siblings-and-burying), або
вручну

Зверніть увагу, що з [новим планувальником](https://faqs.ankiweb.net/the-anki-2.1-scheduler.html),
Anki тепер розрізняє вручну та автоматично приховані картки, тому можна
відновити одну групу без іншої.

Картки, що були забуті, потрапляють до кількох із цих категорій, тому може
бути корисно комбінувати їх для отримання точніших результатів:

`is:learn is:review`\
картки, що були забуті та очікують на повторне вивчення

`-is:learn is:review`\
картки для повторення, без урахування забутих карток

`is:learn -is:review`\
картки, що вивчаються вперше

`flag:1`\
картки з червоним прапорцем

`flag:2`\
картки з помаранчевим прапорцем

`flag:3`\
картки із зеленим прапорцем

`flag:4`\
картки із синім прапорцем

`flag:5`\
картки з рожевим прапорцем

`flag:6`\
картки з бірюзовим прапорцем

`flag:7`\
картки з фіолетовим прапорцем

## Властивості картки

`prop:ivl>=10`\
картки з інтервалом 10 днів або більше

`prop:due=1`\
картки, що мають бути повторені завтра

`prop:due=-1`\
картки, що мали бути повторені вчора, але ще не були відповіді

`prop:due>-1 prop:due<1`\
картки, що мають бути повторені між вчора і завтра

`prop:reps<10`\
картки, на які відповідали менше 10 разів

`prop:lapses>3`\
картки, що переходили в повторне навчання більше 3 разів

`prop:ease!=2.5`\
картки легші або складніші за усталені

`prop:cdn:d>5` (Потрібна Anki 2.1.64+.)\
картки зі значенням `d` у користувацьких даних (зазвичай стосується Складності в FSRS) більше 5

`prop:cds:v=reschedule` (Потрібна Anki 23.10+.)\
картки зі значенням рядка `v` у користувацьких даних, рівним `reschedule`

`prop:s>21` (Потрібна Anki 23.10+ і увімкнений FSRS.)\
картки зі стабільністю більше 21 дня

`prop:d>0.3` (Потрібна Anki 23.10+ і увімкнений FSRS.)\
картки зі складністю більше 0.3

`prop:r<0.9` (Потрібна Anki 23.10+ і увімкнений FSRS.)\
картки з утриманням менше 0.9

## Останні події

### Додано

`added:1`\
картки, додані сьогодні

`added:7`\
картки, додані за останній тиждень

Перевірка здійснюється за часом створення картки, а не нотатки,
тому картки, створені в межах цього періоду, будуть
включені, навіть якщо їхні нотатки були додані давно.

### Відредаговано

`edited:n`\
картки, де текст нотатки було додано/відредаговано за останні n днів.

Потрібна Anki 2.1.28+ / AnkiMobile 2.0.64+.

### Відповіли

`rated:1`\
картки, на які відповіли сьогодні

`rated:1:2`\
картки, на які відповіли Hard (2) сьогодні

`rated:7:1`\
картки, на які відповіли Again (1) за останні 7 днів

`rated:31:4`\
картки, на які відповіли Easy (4) за останній місяць

Пошуки за рейтингом були обмежені 31 днем до версії 2.1.39.

### Вперше відповіли

У версії 2.1.45+ можна також шукати лише перший огляд:

`introduced:1`\
картки, на які відповіли вперше сьогодні

`introduced:365`\
картки, на які відповіли вперше за останні 365 днів

## Пошук спеціальних символів

Цей розділ написано для Anki 2.1.36+ - попередні версії не підтримували екранування
символів у певних ситуаціях.

Як показано в попередньому розділі, деякі символи, як-от `*`, `_` і `"`, мають
особливе значення в Anki. Якщо потрібно знайти ці символи в пошуку,
необхідно вказати Anki не трактувати їх особливим чином.

- _Пробіл_\
  Щоб знайти щось із пробілами, обгорніть `"весь термін"` у подвійні
  лапки. Якщо це пошук із двокрапкою, також можна обгорнути лише
  `частину:"після двокрапки"` (якщо перед двокрапкою також немає пробілів).

- `"`, `*` і `_`\
  Додайте зворотну косу риску перед цими символами, щоб трактувати їх буквально. Наприклад,
  `_` знайде будь-який один символ, але `\_` знайде лише справжній символ підкреслення.

- `\`\
  Оскільки зворотна коса риса використовується для зняття особливого значення з інших символів,
  вона також трактується особливим чином. Якщо потрібно знайти справжню зворотну косу рису,
  використовуйте `\\` замість `\`.

- `(` і `)`\
  Можна шукати дужки, обгорнувши весь термін у лапки,
  і/або використовуючи зворотну косу рису. Тобто, `"some(text)"`, `some\(text\)` і
  `"some\(text\)"` є еквівалентними, але `some(text)` не є.

- `-`\
  Початок пошукового терміна з `-` зазвичай інвертує його: наприклад, `-dog` знайде все,
  крім dog. Якщо замість цього потрібно включити справжній дефіс,
  можна або використовувати зворотну косу рису, або обгорнути текст у лапки, як-от
  `\-.-` або `"-.-"`.

- `:`\
  Двокрапки потрібно екранувати, якщо перед ними немає іншої, неекранованої двокрапки.
  Тому `w:e:b` є пошуком межі слова для `e:b`, `w\:e\:b` шукає буквально
  `w:e:b`, а `w\:e:b` шукає поле `w:e` для `b` (див.
  [пошук за полями](#обмеження-до-поля)).

- `&`, `<`, і `>`\
  `&`, `<`, і `>` трактуються як HTML під час пошуку в Anki, тому пошуки,
  що містять їх, не працюють як очікується. Однак можна шукати їх, використовуючи їхні
  відповідні HTML-імена сутностей (`&amp;` для `&`, `&lt;` для `<`, і `&gt;` для `>`).
  Наприклад, пошук за `&lt;&amp;text&gt;` знайде картку з `<&text>` у полі.

### Сирий ввід

Текст, що передує певним ключовим словам (як-от `re:`), трактуватиметься як сирий ввід. Тобто,
перелічені вище символи здебільшого втрачають своє особливе значення. У такому контексті потрібно
мінімум екранування для уникнення неоднозначності:

- `"` потрібно екранувати.

- Пробіли та неекрановані дужки вимагають обгортання пошукового терміна в лапки.

- Пошуковий термін не повинен закінчуватися непарною кількістю зворотних косих рис.

## Ідентифікатори об'єктів

`nid:123`\
нотатка з ідентифікатором нотатки 123

`cid:123,456,789`\
усі картки з ідентифікаторами карток 123, 456 або 789

Ідентифікатори нотаток і карток можна знайти в діалоговому вікні [інформації про картку](stats.md)
у браузері. Ці пошуки також можуть бути корисними під час розробки додатків
або при тісній роботі з базою даних.
