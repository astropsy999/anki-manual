# Упаковані колоди

<!-- toc -->

Пакунки Anki (файли .apkg) дозволяють імпортувати колоди, нотатки, типи нотаток і карти з
інших користувачів. Ними зазвичай діляться на [AnkiWeb](https://ankiweb.net/shared/decks).

## Створення розкладу

Пакунки Anki також можуть містити інформацію про розклад, яка є корисною, якщо користувач
бажає передавати колоди між пристроями чи профілями. Однак, імпортуючи колоду, якою користується
хтось інший, ви зазвичай не бажаєте імпортувати інтервали показу карт або історію переглядів.

Якщо ви зіткнетеся з тим, що імпортовані картки мають неочікувано великі інтервали, або можливо, що автор
колоди випадково додав інформацію про розклад. Ви можете скористатися функцією [Установити дату виконання](../browsing.md#картки), щоб скинути розклад для імпортованих карток. У Anki 23.10 і новіших версіях ви можете видалити будь-яку інформацію про планування під час процесу імпорту, залишивши невибраним параметр «Імпортувати будь-який прогрес навчання». Це також видалить будь-які теги «п’явки» або «марковані» з імпортованих карток.

## Оновлення

Коли ви імпортуєте файл .apkg, Anki ідентифікує всі нотатки, які вже є у вашій колекції через попередній імпорт.
Якщо нотатки у файлі новіші за вашу локальну копію, їх буде оновлено вмістом файлу за замовчуванням.

Такий процес оновлення, як правило, неможливий, якщо тип нотатки змінено (наприклад, якщо ви або автор колоди додали додаткове поле до типу нотатки). Ви все ще зможете імпортувати будь-які відсутні нотатки з файлу, але нотатки, які ви імпортували раніше, не будуть оновлені.

### Anki 23.10 і новіші версії

Anki 23.10 представив більше гнучкості: ви можете вибрати безумовне оновлення нотаток і типів нотаток,
завжди перезаписуючи свої зміни, або, з іншого боку, ніколи не оновлювати існуючі об’єкти.

Крім того, якщо і ви, і автор колоди змінили той самий тип нотаток, тепер ви можете вирішити _об’єднати_ дві версії.
Це збереже всі шаблони та поля, що містяться в одному з них, але потребуватиме повної синхронізації та може позначити інші наявні нотатки як змінені.

#### Примітка для авторів колод

Об’єднання ґрунтується на ідентифікаторах шаблонів і полів, які були введені в Anki 2.1.67. Якщо в шаблоні чи полі відсутній ідентифікатор,
оскільки вони були створені в попередніх версіях, Anki намагається знайти еквівалент, порівнюючи імена.

Перегляньте цей [цей додаток](https://ankiweb.net/shared/info/2063785767), щоб дізнатися, чому корисно ділитися типами нотаток з ідентифікаторами полів і шаблонів і як додати їх до існуючих.

### Обхідний шлях для Anki 2.1.66 і раніших версій

Якщо ви знаєте, що автор колоди вніс зміни, і хочете отримати до них доступ, змінити тип нотатки можливо, але досить складно. Вам потрібно буде зробити наступне:

- Створіть новий профіль та імпортуйте в нього файл .apkg.
- Знайдіть одну з нотаток, яку не вдалося оновити, на екрані перегляду та оберіть її.
- Використовуйте кнопки «Поля та картки», щоб перевірити назви полів і шаблонів карток і запишіть їх.
- Використовуйте [консоль налагодження](../misc.md#консоль-налагодження), щоб визначити ідентифікатор типу нотатки. Це буде число в останньому рядку.

```
nt = bcard().note().note_type()
print("notetype", nt["name"], "has id", nt["id"])
```

- Поверніться до свого звичайного профілю, знайдіть ту саму картку та виберіть її. Виконайте наступне в консолі налагодження, замінивши `xxx` ідентифікатором, який ви отримали вище:

```
nt = bcard().note().note_type()
print("current:", nt["name"], "has id", nt["id"])
nt = mw.col.models.get(xxx)
print("desired:", nt["name"], "has id", nt["id"])
```

- Якщо він друкує дві різні назви нотаток, вам потрібно буде використати дію «Змінити тип нотаток», щоб змінити тип вашої наявної нотатки на потрібний.

- Потім вам потрібно буде скористатися кнопками «Поля» та «Картки», щоб перевірити, чи назви полів і шаблонів відповідають іменам у вашому тестовому профілі. Вони повинні точно збігатися - не повинні бути більшими або меншими, а написання повинно бути ідентичним.
